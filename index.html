<html>

 <head>

    <script type="text/javascript">
         (function(a_,i_,r_,_b,_r,_i,_d,_g,_e){if(!a_[_b]){var d={queue:[]};_r.concat(_i).forEach(function(a){var i_=a.split("."),a_=i_.pop();i_.reduce(function(a,i_){return a[i_]=a[i_]||{}},d)[a_]=function(){d.queue.push([a,arguments])}});a_[_b]=d;a_=i_.getElementsByTagName(r_)[0];i_=i_.createElement(r_);i_.onerror=function(){d.queue.filter(function(a){return 0<=_i.indexOf(a[0])}).forEach(function(a){a=a[1];a=a[a.length-1];"function"===typeof a&&a("error occur when load airbridge")})};i_.async=1;i_.src="//static.airbridge.io/sdk/latest/airbridge.min.js";a_.parentNode.insertBefore(i_,a_)}})(window,document,"script","airbridge","init fetchResource setBanner setDownload setDownloads openDeeplink setDeeplinks sendWeb setUserAgent setUserAlias addUserAlias setMobileAppData setUserId setUserEmail setUserPhone setUserAttributes clearUser setDeviceIFV setDeviceIFA setDeviceGAID events.send events.signIn events.signUp events.signOut events.purchased events.addedToCart events.productDetailsViewEvent events.homeViewEvent events.productListViewEvent events.searchResultViewEvent".split(" "),["events.wait"]);

            airbridge.init({
                app: 'ablog',
                appToken: '8ec37a00b37a4576a7f8bdf8d5164dd5',
                userHash: true,
                defaultParams: {
                    'medium': 'sms',
                    'campaign': '20180307-websdk-qa'
                },
                utmParsing: true,
                urlQueryMapping: {
                    'channel': 'test_channel',
                    'campaign': 'test_campaign'
                },
                useProtectedAttributionWindow: true,
                cookieWindowInMinutes: 120,
                sessionTimeout: 15000,
            }, function (err, res) {
                console.log(err);
            }); 
    </script>

    <style>

        body {
            background-color: #00BCD4;
        }
        h3 {
            color: #fff;
        }
        p {
            color: #fff;
        }
     
    </style>
 
    <title> Testing Local Web Page in Flutter WebView </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
 
</head>
 
<body>
 
    <h3> flutter_inappwebview plugin. </h3>
    <h3> airbridge web sdk. </h3>

    <p></p>

    <input type="button" value="WebToken" onclick="getWebToken()">
    <input type="button" value="JsonSchemaVersion" onclick="getJsonSchemaVersion()">
    <input type="button" value="SdkVersion" onclick="getSdkVersion()">
    
    <p></p>
    
    <input type="button" value="setUser" onclick="setUser()">
    <input type="button" value="clearUser" onclick="clearUser()">
    <input type="button" value="trackEvent" onclick="trackEvent()">

<script type="text/javascript">

    function getWebToken() {
        console.log('getWebToken: ' + AirbridgeNative.getWebToken());
    }

    function getJsonSchemaVersion() {
        console.log('getJsonSchemaVersion: ' + AirbridgeNative.getJsonSchemaVersion());
    }

    function getSdkVersion() {
        console.log('getSdkVersion: ' + AirbridgeNative.getSdkVersion());
    }

    function setUser() {
        AirbridgeNative.setUser(
            JSON.stringify({
                name: "hong",
                age: 40
            })
        );
    }

    function clearUser() {
        AirbridgeNative.clearUser();
    }

    function trackEvent() {
        AirbridgeNative.trackEvent(
            JSON.stringify({
                category: 'hybrid.category',
                action: 'hybrid.action',
                label: 'hybrid.label',
                value: 100,
                custom_attributes: {
                    custom1: 'first value',
                    custom2: 'second value',
                },
                semantic_attributes: {
                    productListID: 'test productListID',
                    transactionID: 'test transactionID',
                    cartID: 'test cartID',
                    inAppPurchased: true,
                    totalValue: 15000,
                    currency: 'test currency',
                    query: 'test query',
                    products: [{
                        productID: '1',
                        name: 'MacBook Pro',
                        price: 1548200,
                        currency: 'KRW',
                        position: 1
                    }, {
                        productID: '2',
                        name: 'MacBook Air',
                        price: 1500000,
                        currency: 'KRW',
                        position: 2,
                    }]
                }
            })
        );
    }
</script>
</body>
 
 
</html>